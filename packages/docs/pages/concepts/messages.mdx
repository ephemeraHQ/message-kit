# Messages

## Listening

When you start the app, you can listen for incoming messages in the conversation using the `run` function.

```jsx [src/index.ts]
run(async (context: HandlerContext) => {
  // Get the message and the address from the sender
  const { content, sender } = context.message;

  // To reply, just call `reply` on the HandlerContext.
  await context.reply(`gm`);
});
```

## Message object

The `message` object contains the following

```tsx
{
  id: string, // The id of the message
  content: {}, // The content of the message depending on the  type
  sender: User, // The user object of the sender
  sent: Date, // The timestamp of the message
  typeId: string; // The  type of the message (text, reply or reaction)
}
```

To learn more about the types, see [types](/concepts/content-types/text)

## App message

App messages are messages that are sent when you send a reply to a message and are highlighted differently by the apps.

```tsx
// Message to all users
context.reply("Sender or receiver not found.");

// Message to specific user/users
context.reply("Sender or receiver not found.");
(
  `You received ${amount} DEGEN tokens from ${sender.username}. Your new balance is ${receiver.degen} DEGEN tokens.`,
  addresses, // Array of addresses to send the message to
);
```

> App messages are prevented from being sent to the app itself\_

## Message history

To get the message history in a conversation you can use the `messages` property.

```tsx
// sync group first
await conversation.sync();
// get messages
const messages = conversation.messages();
```

_Refer to group messages [here](/concepts/groups)_
