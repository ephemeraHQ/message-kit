## Redis

Install dependencies

```bash [cmd]
bun add @redis/client
```

Copy paste the following code in your `lib/redis.ts` file.

```tsx [src/lib/redis.ts]
import { createClient } from "@redis/client";

export const getRedisClient = async () => {
  const client = createClient({
    url: process.env.REDIS_CONNECTION_STRING,
  });

  client.on("error", (err) => {
    console.error("Redis client error:", err);
  });

  await client.connect();
  return client;
};

export async function updateField(
  client: RedisClientType,
  key: string,
  updateObject: any,
) {
  // Check if the key exists
  const data = await client.get(key);

  let updatedData;
  if (data) {
    // If the key exists, parse it and merge the updates
    const parsedData = JSON.parse(data);
    updatedData = { ...parsedData, ...updateObject };
  } else {
    // If the key doesn't exist, use the updateObject as the initial value
    updatedData = updateObject;
  }

  // Save the updated or new data back to Redis
  await client.set(key, JSON.stringify(updatedData));
}
```
