# GPT

> This plugin is already included in MessageKit, but you can import it directly in your files for more customization.

## Overview

The idea behind this plugin is to abstract the complexities of creating agents by handling:

- Memory
- Skills execution
- Personality
- Rules
- Reliability
- User context

### Requirements

- `openai`: The OpenAI package (already installed in MessageKit).
- `OPENAI_API_KEY`: The OpenAI API key.

The `agentReply` is a default function in MessageKit. It processes incoming messages, generates a response using GPT, and sends the reply back to the user.

### Key methods

- **`parsePrompt`**: Parses the system prompt using the agent's system prompt or a default one. It customizes the prompt based on the sender's address and the agent's configuration.

- **`textGeneration`**: Generates a reply using the provided user prompt and system prompt. It utilizes the OpenAI API to create a response based on the conversation context.

- **`processMultilineResponse`**: Processes the generated reply and sends it back to the user. It handles multiline responses to execute the [Skills](/community/skills) defined in the agent.

## Default prompt

Here is the prompt for the agent.

```jsx [src/prompt.ts]
export const systemPrompt = `{intro}

{vibe}

{rules}

{user_context}

{skills}
`;
```

## Default rules

This is how the prompt rules are implemented in MessageKit.

```tsx [plugins/gpt.ts]
// [!include ~/../../packages/message-kit/src/plugins/gpt.ts:PROMPT_RULES]
```

## Memory

This is how the memory is implemented in MessageKit. For now, it's only in memory.

```tsx [plugins/gpt.ts]
// create memory
chatMemory.createMemory(key, systemPrompt);
// add memory
chatMemory.addEntry(
  context.getMemoryKey() || "any memory key",
  text,
  "user | assistant | system",
);
// clear memory
chatMemory.clear(key);
// get memory
chatMemory.getHistory(key);
```

## Full plugin

This code is included in MessageKit, but you can import it directly in your files for more customization.

```tsx [plugins/gpt.ts]
// [!include ~/../../packages/message-kit/src/plugins/gpt.ts]
```
