# ENS Agent

This is a simple yet powerful agent that will help users interact with ENS.

## Skills

- [Check](/templates/agent/handlers/check): Check if a domain is available
- [Cool](/templates/agent/handlers/cool): Show cool alternatives
- [Register](/templates/agent/handlers/register): Register a domain
- [Reset](/templates/agent/handlers/reset): Reset a domain
- [Renew](/templates/agent/handlers/renew): Renew a domain
- [Info](/templates/agent/handlers/info): Get info about a domain
- [Tip](/templates/agent/handlers/tip): Tip a domain

## Structure

```
agent/
├── src/
│   └── handler/           # ENS agent // [!code hl] // [!code focus]
│       ├── check.ts       # Check if a domain is available // [!code hl] // [!code focus]
│       ├── cool.ts        # Show cool alternatives // [!code hl] // [!code focus]
│       ├── info.ts        # Check if a domain is registered // [!code hl] // [!code focus]
│       ├── register.ts    # Register a domain // [!code hl] // [!code focus]
│       ├── renew.ts       # Renew a domain // [!code hl] // [!code focus]
│       ├── reset.ts       # Reset a domain // [!code hl] // [!code focus]
│       ├── tip.ts         # Tip a domain // [!code hl] // [!code focus]
│   ├── index.ts           # Prompt and stream // [!code hl] // [!code focus]
│   ├── prompt.ts          # Prompt // [!code hl] // [!code focus]
│   ├── skills.ts          # Skills // [!code hl] // [!code focus]
├── package.json
├── tsconfig.json
└── .env
```

## Runner

The runner function to start the agent and listen for incoming messages:

```tsx [src/index.ts]
// [!include ~/../../templates/agent/src/index.ts]
```

```tsx [src/index.ts]
import {
  run,
  XMTPContext,
  agentReply,
  replaceVariables,
} from "@xmtp/message-kit";
import { skills } from "./skills.js";
import { systemPrompt } from "./prompt.js";

run(
  async (context: XMTPContext) => {
    const {
      message: { sender },
      runConfig,
    } = context;

    let prompt = await replaceVariables(
      systemPrompt,
      sender.address,
      runConfig?.skills,
      "@bot",
    );
    await agentReply(context, prompt);
  },
  { skills },
);
```

## Prompt

This is the prompt that the agent will use to respond to the user.

```tsx [src/prompt.ts]
// [!include ~/../../templates/agent/src/prompt.ts]
```

## Run the app

Follow the steps below to run the app

::::steps

### Setup

```bash [cmd]
# Clone the repo
git clone https://github.com/ephemeraHQ/message-kit
# Go to the templates/agent folder
cd templates/agent
# Install the dependencies
yarn install
# Run the app
yarn dev
```

### Variables

Set up these variables in your app

```bash [.env]
KEY= # the private key of the wallet
OPEN_AI_API_KEY= # sk-proj-...
```

::::
